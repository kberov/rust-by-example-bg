# Зависимости

Много програми зависят от някакви библиотеки. Ако някога сте управлявали
зависимости на ръка, знаете каква мъка е. За щастие Ръждьо идва стандартно с
`cargo`! `cargo` може да управлява зависимостите в проекта.


За да създадете нов проект на Ръждьо, изпълнете на командния ред:

```sh
# Изпълним
cargo new foo

# Библиотека
cargo new --lib bar
```

До края на раздела ще приемем, че правим изпълним файл, но знайте, че е същото
като за библиотека.

След изпълнението на горните команди файловото дърво на проекта изглежда така:

```txt
.
├── bar
│   ├── Cargo.toml
│   └── src
│       └── lib.rs
└── foo
    ├── Cargo.toml
    └── src
        └── main.rs
```

`main.rs` е главния файл с изходен код за новия ви проект `foo` – нищо особено.
`Cargo.toml` е файлът с настройки за `cargo` за този проект. Ако погледнете в
него, ще видите нещо такова:

```toml
[package]
name = "foo"
version = "0.1.0"
authors = ["mark"]

[dependencies]
```

Полето `name` под `[package]` определя името на проекта. То се ползва от
`crates.io`, ако обнародвате коша (повече по-късно). Това е и името на двоичния
изпълним файл след компилация.

Полето `version` е версията на коша. Използват се [Значещи версии](http://semver.org/)[^semantic_versions].

Полето `authors`е списък с автори, който се ползва когато се обнародва коша.

Разделът `[dependencies]` е за добавяне на зависимости към проекта.

Нека предположим, че искаме програмата ни да има отлично взаимодействиe с
командния ред[^cli]. Можете да намерите много чудесни пакети на
[crates.io](https://crates.io) (представителния[^official] регистър за пакети
на Ръждьо). Чест избор е [clap](https://crates.io/crates/clap). По време на
това писание последната версия на `clap` е `2.27.1`. За да добавим зависимост
към нашата програма, просто добавяме следното в `Cargo.toml` под
`[dependencies]`: `clap = "2.27.1"`. И това е! Можете да използвате `clap`.

`cargo` поддържа и [други типове зависимости][dependencies]. Ето малък пример:

```toml
[package]
name = "foo"
version = "0.1.0"
authors = ["mark"]

[dependencies]
clap = "2.27.1" # от crates.io
rand = { git = "https://github.com/rust-lang-nursery/rand" } # от хранилището
bar = { path = "../bar" } # от файлов път на сметалото ви
```

`cargo` е повече от управление на зависимости. Всички възможни настройки
са изброени в [спецификациатя на формата][manifest] на
`Cargo.toml`.

За да построим нашия проект можем да изпълним `cargo build` където и да е в
папката на проекта (включително и подпапките). Може също да изпълним `cargo
run`, за да построим и изпълним произведения двоичен файл. Забележете, че тези
команди ще разрешат зависимостите, ще изтеглят кошовете, ако е необходимо и ще
построят всичко, включително и вашия кош. Ще се построи отново само каквото е
нужно, подобно на `make`.

Voila! Това е всичко!

## Б. пр.

[^semantic_versions]: Значещи версии – semantic versions

[^cli]: взаимодействиe с командния ред – command line interface. взаимодействиe – interfac

[^official] представителен (официален) – official

[manifest]: https://doc.rust-lang.org/cargo/reference/manifest.html
[dependencies]: https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html
