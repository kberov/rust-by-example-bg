# Arc

Когато се нуждаем от споделено владение на данните между нишките на нашата
програма, можем да ползваме `Arc`(Atomically Reference Counted – Неделимо
Броене на Препратките, б.пр.). Чрез своето въплъщение на `Clone` тази структура
може да създава указател към данните от купа̀, като увеличава броя на
препратките към данните, към които сочи указателят. Тъй като `Arc` поддържа
споделено между нишките владение, когато последната препратка към дадено парче
данни излезе от обхват, променливата (и съответната стойност) се освобождават.

```rust,editable
use std::time::Duration;
use std::sync::Arc;
use std::thread;

fn main() {
    // Чрез тази обява на променлива указваме и стойността.
    let apple = Arc::new("the same apple");

    for нишка in 0..10 {
        // Тук не указваме нова стойност. Новата променлива е указател към
        // препратка от купа̀ памет.
        let apple = Arc::clone(&apple);

        thread::spawn(move || {
            // Понеже ползваме Arc, можем да създаваме нови нишки със заделено
            // място за новия указател.
            println!("{:?} от нишка {нишка}", apple);
        });
    }

    // Изчакваме да се отпечатат всички обекти от тип Arc от всички нишки.
    thread::sleep(Duration::from_secs(1));
}
```
