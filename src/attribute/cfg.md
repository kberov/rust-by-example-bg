# `cfg`

Условни проверки на настройките на компилиране са възможни чрез два оператора:

* атрибутът `cfg`: `#[cfg(...)]`
* макросът `cfg!`: `cfg!(...)` при условни изрази

Докато първият включва условна компилация, вторият условно се оценява като
буквалите[^literals] „да” (`true`) или „не” (`false`), което позволява да се
правят проверки по време на изпълнение. И двете единици код ползват един и същ
правопис за приемане на аргументи.

За разлика от `#[cfg]`, `cfg!` не премахва код, а само се оценява като „да” или
„не”. Вички блокове в един израз if/else трябва да работят, когато се ползва  `cfg!`,
независимо как ще бъде оценен `cfg!`.

```rust,editable
// Тази функция се компилира само ако целевата ОУ е Линукс
#[cfg(target_os = "linux")]
fn are_you_on_linux() {
    println!("Работите в Линукс!");
}

// А тази функция се компилира само ако целевата ОУ *не е* Линукс
#[cfg(not(target_os = "linux"))]
fn are_you_on_linux() {
    println!("*Не* работите в Линукс!");
}

fn main() {
    are_you_on_linux();

    println!("Сигурни ли сте?");
    if cfg!(target_os = "linux") {
        println!("Да. Определено е Линукс!");
    } else {
        println!("Да. Определено *не е* Линукс!");
    }
}
```

## Б.пр.

[^literals]: буквал (буквална стойност) – literal (literal value)

### Вижте също:

[Справочника][ref], [документацията за `cfg!`][cfg] и [macro_rules!][macros].

[cfg]: https://doc.rust-lang.org/std/macro.cfg!.html
[macros]: ../macros.md
[ref]: https://doc.rust-lang.org/reference/attributes.html#conditional-compilation
