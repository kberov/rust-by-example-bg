# Drop

Отличителят [`Drop`][Drop] има само един метод – `drop`, който се извиква
автоматично, когато даден обект излезе от обхват. Главната полза от `Drop` е
освобождаването на памет, която производният обект владее.

`Box`, `Vec`, `String`, `File` и `Process` са примерни въплъщения на `Drop` за
освобождаване на данни. Отличителят `Drop` може да бъде осъществен и на ръка
за всеки потребителски тип.

Следващият пример извежда съобщение в конзолата и така показва кога е
извикана функцията `drop`.

```rust,editable
struct Droppable {
    name: &'static str,
}

// Това простичко въплъщение на `drop` отпечатва в конзолата.
impl Drop for Droppable {
    fn drop(&mut self) {
        println!("> Dropping {}", self.name);
    }
}

fn main() {
    let _a = Droppable { name: "a" };

    // блок А
    {
        let _b = Droppable { name: "b" };

        // блок Б
        {
            let _c = Droppable { name: "c" };
            let _d = Droppable { name: "d" };

            println!("Излизаме от блок Б");
        }
        println!("Тъкмо излязохме от блок Б");

        println!("Излизаме от блок А");
    }
    println!("Тъкмо излязохме от блок А");

    // Променливата може да бъде освободена чрез извикване ръчно на `drop`
    drop(_a);
    // ЗАДАЧА ^ Коментирайте този ред

    println!("край на главната функция");

    // `_a` няма да бъде освободена отново тук, понеже вече е освободена ръчно
}
```

[Drop]: https://doc.rust-lang.org/std/ops/trait.Drop.html
