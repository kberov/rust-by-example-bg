# Езици с особено предназначение (ЕОП) 

Един ЕОП е малък език, внедрен в макроси на Ръждьо. Това си е напълно действащ
Ръждьо, защото уредбата за макроси го разгръща в обикновени изявления и изрази
на Ръждьо, но изглежда като малък език. Това ви позволява да опишете сбит или
самовиден[^intuitive] правопис за някакви особени (ограничени) дейности.

Да предположим, че искам да опиша _ВП (Външност за Приложение)_[^API] за
калкулатор. Бих искал да мога, като напиша математически израз, изходът да се
изведе на конзолата.

```rust,editable
macro_rules! calculate {
    (eval $e:expr) => {
        {
            let val: usize = $e; // Насилваме типовете да са цели числа
            println!("{} = {}", stringify!{$e}, val);
        }
    };
}

fn main() {
    calculate! {
        eval 1 + 2 // Хи-хи, `eval` _не е_ ключова дума в Ръждьо!
    }

    calculate! {
        eval (1 + 2) * (3 / 4)
    }
}
```

Изход:

```txt
1 + 2 = 3
(1 + 2) * (3 / 4) = 0
```

Това беше простичък израз, но има разработени много по-сложни външности,
като например [`lazy_static`](https://crates.io/crates/lazy_static) или
[`clap`](https://crates.io/crates/clap).

Обърнете внимание и на двете двойки фигурни скоби в макроса. Външните са част
от правописа на `macro_rules!`, в допълнение към `()` или `[]`.


## Б. пр.

[^intuitive]: самовиден (очевиден, саморазбиращ се) – [intuitive][intuitive] (self-evident). 

[^API]: ВП (Външност за Приложение) – API (Application Programmming Interface)

[intuitive]: https://www.etymonline.com/word/intuitive
